<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<title>王者出击</title>
<meta name="format-detection" content="telephone=no">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui,viewport-fit=cover" />
<link rel="stylesheet" href="../style/css/index.css?dd"  />
<style>
.mod_head .user_account{
	background: #fff;
	-webkit-box-flex: inherit;
-webkit-flex: inherit;
flex: inherit;
}
</style>

</head>
<body ontouchstart >
	<header class="mod_head">
		<div class="avatar"><img src="//tacs_v1.oa.com/img.php?60x60"><i class="account_qq"></i><i class="account_wechat"></i></div>
		<div class="user_account"><div class="name">faychengfaycheng</div><i class="icon_vip icon_vip_lv6"><i class="icon_vip_num"></i></i></div>

		<div class="title">做doki任务赢宝箱皮肤</div>
		<div class="link_assets">我的资产</div>
		<div class="link_rule">活动规则</div>
		<div class="bar_value">
			<i class="icon_crystal"></i><span class="name">能量值</span><span class="num">10</span>
		</div>
		<i class="icon_close"></i>
	</header>

	<section class="mod_container">
		<div class="mod_content">
			<div class="mod_task">
				<div class="mod_title">每日任务</div>
				<div class="task_list">
					<ul class="slider_list">

						<li class="slider_item" data-slide-index="0">
							<div class="task_box">
								<div class="content">
									<div class="title">为爱豆签到</div>
									<p>加入明星doki并签到</p>
									<p>可获10能量值</p>
									<p>会员获40能量值</p>
									<button class="btn">前往</button>
								</div>
								<img src="../style/img/p3.png" width="100%" class="cover">

							</div>
						</li>
						<li class="slider_item" data-slide-index="1">
							<div class="task_box">
								<div class="content">
									<div class="title">为爱豆签到</div>
									<p>加入明星doki并签到</p>
									<p>可获10能量值</p>
									<p>会员获40能量值</p>
									<button class="btn" disabled>前往</button>
								</div>
								<img src="../style/img/p1.png" width="100%" class="cover">

							</div>
						</li>

						<li class="slider_item"  data-slide-index="2">
							<div class="task_box">
								<div class="content">
									<div class="title">为爱豆签到</div>
									<p>加入明星doki并签到</p>
									<p>可获10能量值</p>
									<p>会员获40能量值</p>
									<button class="btn">前往</button>
								</div>
								<img src="../style/img/p2.png" width="100%" class="cover">
							</div>
						</li>
					</ul>
				</div>
				<div class="bar_vip">
					<ul class="text">
						<li>开会员必得皮肤三选一：
							<span class="box_skin"><img src="//tacs_v1.oa.com/img.php?48x48" width="24"></span><span class="box_skin"><img src="//tacs_v1.oa.com/img.php?48x48" width="24"></span><span class="box_skin"><img src="//tacs_v1.oa.com/img.php?48x48" width="24"></span>
						</li>
						<li>会员做任务即获双倍能量</li>
					</ul>
					<button class="btn_s">立即开通<i class="tag">买6送3得皮肤</i></button>
				</div>
			</div>
			<div class="mod_lottery">
				<div class="mod_title">抽炒鸡大奖</div>
				<div class="float_notice"><div>kdd刚刚抽到后裔</div><div>kdd刚刚抽到后裔</div></div>
				<div class="lottery_list">
					<div class="lottery_item lottery_item1 active">
						<div class="lottery_box">
							<img width="40" src="http://tacs_v1.oa.com/img.php?80x80">
							<p>京东折扣券50元</p>
						</div>
					</div>
					<div class="lottery_item lottery_item2">
						<div class="lottery_box">
							<img width="40" src="http://tacs_v1.oa.com/img.php?80x80">
							<p>京东折扣券50元</p>
						</div>
					</div>
					<div class="lottery_item lottery_item3">
						<div class="lottery_box">
							<div class="box_skin"><img src="//tacs_v1.oa.com/img.php?72x72" width="36"></div>
							<p>京东折扣券50元</p>
						</div>
					</div>
					<div class="lottery_item lottery_item4">
						<div class="lottery_box">
							<img width="40" src="http://tacs_v1.oa.com/img.php?80x80">
							<p>京东折扣券50元</p>
						</div>
					</div>
					<div class="lottery_item lottery_item5">
						<div class="lottery_box">
							<img width="40" src="http://tacs_v1.oa.com/img.php?80x80">
							<p>京东折扣券50元</p>
						</div>
					</div>

					<div class="lottery_item lottery_item6">
						<div class="lottery_box">
							<img width="40" src="http://tacs_v1.oa.com/img.php?80x80">
							<p>京东折扣券50元</p>
						</div>
					</div>
					<div class="lottery_item lottery_item7">
						<div class="lottery_box">
							<img width="40" src="http://tacs_v1.oa.com/img.php?80x80">
							<p>京东折扣券50元</p>
						</div>
					</div>
					<div class="lottery_item lottery_item8">
						<div class="lottery_box">
							<img width="40" src="http://tacs_v1.oa.com/img.php?80x80">
							<p>京东折扣券50元</p>
						</div>
					</div>

					<div class="lottery_item lottery_action">
						<button class="btn_lottery">开始</button>
						<p class="num_tips">每次消耗<i class="icon_crystal"></i>10</p>
					</div>
				</div>
			</div>
			<div class="mod_play">
				<div class="mod_title">重磅热播</div>
				<ul class="player_list">
					<ul>
						<li>
							<div class="cover_img">
								<img src="http://tacs_v1.oa.com/img.php?334x188">
								<i class="tag">01:30:00</i>
							</div>
							<h4 class="title">王者出击第二集</h4>
							<p class="text">幕后花絮：林志玲骑牛被狂颠</p>
						</li>
						<li>
							<div class="cover_img">
								<img src="http://tacs_v1.oa.com/img.php?334x188">
								<i class="tag">01:30:00</i>
							</div>
							<h4 class="title">王者出击第二集</h4>
							<p class="text">幕后花絮：林志玲骑牛被狂颠</p>
						</li>
						<li>
							<div class="cover_img">
								<img src="http://tacs_v1.oa.com/img.php?334x188">
								<i class="tag">01:30:00</i>
							</div>
							<h4 class="title">王者出击第二集</h4>
							<p class="text">幕后花絮：林志玲骑牛被狂颠</p>
						</li>
						<li>
							<div class="cover_img">
								<img src="http://tacs_v1.oa.com/img.php?334x188">
								<i class="tag">01:30:00</i>
							</div>
							<h4 class="title">王者出击第二集</h4>
							<p class="text">幕后花絮：林志玲骑牛被狂颠林志玲骑牛被狂颠</p>
						</li>
					</ul>
				</ul>

			</div>
			<div class="mod_cr">
				<img src="../style/img/logo1.png" width="95">
				<img src="../style/img/logo2.png" width="104">
				<img src="../style/img/logo3.png" width="73">
			</div>
		</div>
	</section>

	<script src="../js/zepto.js"></script>

	<script type="text/javascript">
		//slider
		function TouchScroll(slideWrap,slide,activeClass) {
			var _x;
			var _y;
			var _css_left = 0;
			var leftWidth = 0;
			var self = this;
			var imgCurNum = 1;
			var imgMaxNum = 0;
			var imgMaxNum = $(slideWrap + " "+ slide).length-1;
			var isRealDrag = false;
			var $scrollUl = $(slideWrap);
			var $scrollLi = $(slideWrap + " "+ slide);
			var scrollWidth = 0;
            //
            //
			// $(window).bind("resize",function() {
			// 	switchFullscreen()
			// 	switchOrientation();
			// 	resetScroll(0);
			// });

			function resetScroll(speed) {
				if(speed == 0){
					imgCurNum = 1;
					leftWidth = 0;
				}

				speed = speed.toString();
				$scrollLi.eq(1).css("-webkit-transform", "translate3d(0 , 0 ,0)");
				$scrollLi = $(slideWrap + " "+ slide);
				$scrollLi.eq(1).addClass(activeClass).siblings().removeClass(activeClass);

				$scrollLi.removeClass("prev next");
				$scrollLi.eq(0).addClass("prev");
				$scrollLi.eq(2).addClass("next");

			}
			this.onclick = function(){
				if($scrollLi.index($(this))==0){
					$scrollUl.prepend($scrollLi.eq(imgMaxNum));
				}else if($scrollLi.index($(this))==2){
					$scrollUl.append($scrollLi.eq(0));
				}

				resetScroll(1500);
				_css_left = 0;
			}

			this.onTouchStart = function() {
				var touch = event.targetTouches[0];
				_x = touch.pageX;
				_y = touch.pageY;
				isRealDrag = false;
				$(this).bind("touchmove", self.onTouchMove);
				$(this).bind("touchend", self.onTouchEnd);
			}

			this.onTouchEnd = function() {
				$(this).unbind("touchmove", self.onTouchMove);
				$(this).unbind("touchend", self.onTouchEnd);
				if (Math.abs(_css_left) > 50) {
					if (_css_left > 0) {
						$scrollUl.prepend($scrollLi.eq(imgMaxNum));
					} else if (_css_left < 0) {
						$scrollUl.append($scrollLi.eq(0));
					}
				}
				resetScroll(1500);
				_css_left = 0;
			}

			this.onTouchMove = function() {
				var touch = event.targetTouches[0];
				if (!isRealDrag) {
					var offsetLeft = Math.abs(touch.pageX - _x);
					if (offsetLeft < Math.abs(touch.pageY - _y)) {
						return;
					}
				}
				isRealDrag = true;
				event.preventDefault();
				var leftTmp = ( $scrollLi.width() + parseInt($scrollLi.css('margin-right'))) * imgCurNum / 50;
				// console.log(leftTmp);
				_css_left = touch.pageX - _x;
				console.log(_css_left,leftTmp)
				if(_css_left > 80){
					_css_left = 80;
				}else if(_css_left < -80){
					_css_left = -80;
				}
				cur_x =  _css_left - leftTmp - leftWidth;
				$scrollLi.eq(1).css("-webkit-transform", "translate3d(" + cur_x + "px" + " , 0 ,0)");
			}
			$(slideWrap).bind("touchstart", this.onTouchStart);
			$scrollLi.bind("click", this.onclick);
			resetScroll(0);
		}

		TouchScroll('.slider_list','.slider_item','active');
	</script>
</body>
</html>
