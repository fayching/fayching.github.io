<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<title>任平生正在直播</title>
	<meta name="keywords" content="明星直播" />
	<meta name="description" content="明星直播" />
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui" />
	<meta name="format-detection" content="telephone=no" />
	<link rel="stylesheet" href="../../../v2/style/tvp_banner_v2.css"  />
	<link rel="stylesheet" href="../../style/play.css" />
	<!-- 开发同学请使用下面这个css引入代码：
	<link rel="stylesheet" href="http://imgcache.gtimg.cn/tencentvideo_v1/vstyle/mobile/v2/style/tvp_banner_v2.css"  />
	<link rel="stylesheet" href="http://imgcache.gtimg.cn/tencentvideo_v1/vstyle/mobile/topic/style/whyme/whyme.css"  />
	-->
</head>
<body class="page_live">
<div class="container_live">
	<div class="main main_portrait main_living">
		<section class="mod_player" id="mod_player">
			<img src="http://i.gtimg.cn/qqlive/images/20151229/poster.jpg" alt="" />
		</section>

		<header class="live_head">
			<span class="host_avatar"><img src="http://i.gtimg.cn/qqlive/images/20150608/rpsh.jpg" alt=""></span>
			<div class="host_content">
				<div class="host_name">任平生</div>
				<div class="host_desc"><span class="num">890000</span>人在看</div>	
			</div>
			<div class="head_tool">
				<a href="#" class="btn_follow">关注</a>
			</div>
		</header>

		<div class="mod_live_like">
			点赞值 <span class="num">123456789</span>
		</div>

		<div class="mod_live_end none">
			<div class="end_title">直播已结束</div>
			<div class="end_desc"><span class="num">279797</span>人看过</div>
		</div>

		<section class="mod_barrage">
			<div class="barrage_wrap" id="barrage_wrap">
				<div class="barrage_list" id="barrage_list" style="top:0">
					<div class="item"><span class="text"><span class="name">大粉丝：</span>人生得意须尽欢</span></div>
					<div class="item"><span class="text"><span class="name">大粉丝：</span>莫使金樽空对月</span></div>
					<div class="item"><span class="text"><span class="name">大粉丝：</span>五花马</span></div>
					<div class="item"><span class="text"><span class="name">大粉丝：</span>千金裘</span></div>
					<div class="item"><span class="text"><span class="name">大粉丝：</span>呼儿将出换美酒</span></div>
					<div class="item"><span class="text">阿呆：与尔同销万古愁万古愁</span></div>
					<div class="item"><span class="text">阿呆：与尔同销万古愁万古愁</span></div>
					<div class="item"><span class="text">阿呆：与尔同销万古愁万古愁</span></div>
					<div class="item"><span class="text">阿呆：与尔同销万古愁万古愁</span></div>
					<div class="item"><span class="text">阿呆：与尔同销万古愁万古愁</span></div>
					<div class="item"><span class="text">阿呆：与尔同销万古愁万古愁与尔同销万古愁万古愁与尔同销万古愁万古愁与尔同销万古愁万古愁与尔同销万古愁万古愁与尔同销万古愁万古愁</span></div>

				</div>
			</div>
			
			<div class="barrage_func" toggle-class="func_active">
				<a href="javascript:;" class="btn_normal btn_like" id="btn_like">
					<em class="effect_liked icon_bubble_liked"><i class="icon_bubble"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 34 28" xml:space="preserve"><path fill="#FC3939" d="M24.4,0c-2.6,0-4.8,1-6.5,2.1c-0.8,0.5-1.9,0.5-2.7,0C13.5,1,11.3,0,8.7,0C2.7,0,0,5.3,0,10.2 c0,6.6,7.1,11.7,14.7,17.1l0.3,0.2c0.9,0.6,2,0.6,2.9,0c8-5.3,15.1-10.6,15.1-17.4C33,3.1,28.7,0,24.4,0z"/></svg></i></em> <span class="like_inner">
						<i class="icon_like"><em class="progress"></em></i>
					</span>
				</a>
			</div>
		</section>

		<!-- 拉动banner 开始 -->
		<div class="tvp_app_bar tvp_app_bar_dark">
			<div class="tvp_bar_inner">
				<div class="tvp_app_pic">
					<div class="tvp_app_logo" style="background-image: url(//i.gtimg.cn/qqlive/images/20160905/i1473073576_1.jpg);"></div>
				</div>
				<div class="tvp_app_wording">
					<div class="tvp_wording_title" data-text="打开腾讯直播"></div>
					<div class="tvp_wording_desc" data-text="更快速度，更多互动！"></div>
				</div>
				<div class="tvp_app_btn tvp_app_btn_wire" data-status="down">
					<div class="tvp_progress">
						<div class="tvp_progress_current"></div>
					</div>
					<div class="tvp_btn_text" data-text="安装"></div>
				</div>
			</div>
		</div>
		<!-- 拉动banner 结束 -->
	</div>
	
	<section class="mod_row mod_row_live">
		<div class="mod_row_hd"><h2 class="title">大家都在看</h2></div>
		<div class="mod_row_bd">
			<div class="mod_figures mod_figures_h">
				<ul class="mod_figure">
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="mark_live">直播</span>
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="mark_vod">回放</span>
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</section>

	<section class="mod_row mod_row_history">
		<div class="mod_row_hd"><h2 class="title">TA的精彩直播</h2></div>
		<div class="mod_row_bd">
			<div class="mod_figures mod_figures_h">
				<ul class="mod_figure">
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="mark_live">直播</span>
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="mark_vod">回放</span>
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</section>
</div>



<div class="container_invite none">
	<section class="mod_invite">
		<div class="mod_invite_head">
			<span class="poster" style="background-image: url(http://i.gtimg.cn/qqlive/images/20151229/poster.jpg);"></span>
			<div class="btn_play"></div>
		</div>

		<!-- 直播时间 -->
		<div class="mod_invite_time">
			直播时间： <span class="hl">12月28日 20:00</span>
		</div>
		<div class="mod_invite_time">
			直播时间： <span class="hl_error">12月28日 20:00</span>
		</div>
		<div class="mod_invite_time">
			直播时间： <span class="hl_end">12月28日 20:00</span>
		</div>

		<!-- 预定按钮 -->
		<div class="mod_invite_btns">
			<a href="#" class="btn_invite">立即预约</a>
			<div class="invite_desc">当前已有 <span class="hl">2222</span> 人预约</div>
		</div>
		<div class="mod_invite_btns">
			<a href="#" class="btn_invite btn_invited">已成功预约  开始前将提醒你</a>
			<div class="invite_desc">当前已有 <span class="hl">2222</span> 人预约</div>
		</div>
		<div class="mod_invite_btns">
			<a href="#" class="btn_invite">直播已开始 立即观看</a>
			<div class="invite_desc">当前已有 <span class="hl">2222</span> 在观看</div>
		</div>
		<div class="mod_invite_btns">
			<div class="invite_desc">本场直播稍有延迟，主播正在赶来的路上，<br> 请耐心等待~</div>
			<a href="#" class="btn_simple">查看更多精彩</a>
		</div>
		<div class="mod_invite_btns">
			<div class="invite_desc">主播掉链子啦，直播因超时未开始被结束， <br> 感谢您的关注~~</div>
			<a href="#" class="btn_simple">查看更多精彩</a>
		</div>
	</section>

	<div class="mod_host">
		<span class="host_avatar"><img src="http://i.gtimg.cn/qqlive/images/20150608/rpsh.jpg" alt=""></span>
		<span class="host_name">任平生</span>
		<a href="#" class="btn_follow">关注</a>
	</div>


	<section class="mod_row mod_row_live">
		<div class="mod_row_hd"><h2 class="title">大家都在看</h2></div>
		<div class="mod_row_bd">
			<div class="mod_figures mod_figures_h">
				<ul class="mod_figure">
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="mark_live">直播</span>
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="mark_vod">回放</span>
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
					<li class="item">
						<a href="play.html" class="figure">
							<span class="figure_pic">
								<img src="http://i.gtimg.cn/qqlive/images/20150608/pic_h.png" alt="视频标题">
								<span class="figure_caption">
									<span class="figure_info">试试名字有多长</span> 
									<span class="figure_count">8333.2万</span>
								</span>
							</span>
							<span class="figure_title">视频标题视频标题视频标题视频标题</span>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</section>

	
</div>

<div class="mod_share_tips"></div>




<select name="" id="select" style="position:fixed;top:0px;right:10px;font-size: 20px;line-height: 20px;z-index: 10;">
	<option value="1" selected>直播中</option>
	<option value="2">邀请函</option>
	<option value="3">直播结束</option>
</select>



<script src="../../js/zepto.js"></script>
<script src="http://imgcache.qq.com/tencentvideo_v1/tvp/js/tvp.player_v2_zepto.js" ></script>
<script>


$(function(){
	//支持
	var pgCount,
		nclass = $("#btn_like .icon_like").attr("class"),
		cnum = 0;
	// pgCount = setInterval(function(){
	// 	cnum === 6 ? cnum = 6 : cnum++;
	// 	$("#btn_like .icon_like").attr("class", nclass + " pos_0"+cnum);
	// }, 3000);

	var likeCount = 0,
		btnLikeClass = $("#btn_like").attr("class"),
		iconLikeClass = $("#btn_like .effect_liked").attr("class"),
		canTap = false;

	// 2秒不点击，心就飞走
	var hearFadeout;
	$('.barrage_func .btn_like')[0].addEventListener('webkitAnimationEnd',function(){
		likeCount = 0;
		$('#btn_like .effect_liked').removeClass('effect_bubble')
		$('#btn_like .effect_liked').attr("class", iconLikeClass + ' like_count_00');
	},false)

	$("#btn_like").on("tap", function(){
		if( $('#btn_like .effect_liked').hasClass('effect_bubble') ){
			return false;
		}

		clearTimeout('hearFadeout');

		hearFadeout = setTimeout(function(){
			$('#btn_like .effect_liked').addClass('effect_bubble');
		},3000)


		if (likeCount === 4) {
			//+人气特效
			var etxt = '<span class="effect_txt">人气+3</span>';
			setTimeout(function(){
				$("#btn_like").append(etxt);
				setTimeout(function(){
					$("#btn_like").find(".effect_txt").remove();
				}, 1500)
			}, 1200)
		};

		if (likeCount === 5) {
			$(this).find('.effect_liked').addClass('effect_bubble');
			return false;

		}else{
			likeCount++;
		}

		$(this).attr("count",likeCount);
		$(this).find('.effect_liked').attr("class", iconLikeClass + " like_count_0" +likeCount);

		// cnum--;
		// $("#btn_like .icon_like").attr("class", nclass + " pos_0"+cnum);

		return false;
	});

	//表表弹幕
	$(".btn_text,.input_barrage").on("tap", function(){
		$('form').addClass("func_active");
		$(".input_barrage").focus();
	});
	// $(".input_barrage").on("blur", function(){
	// 	$(this).parent().removeClass("func_active");
	// });
	$(".input_barrage").on("keydown", function (e){
		$('.btn_submit').removeClass('disabled')
		if (e.keyCode === 13) {
			if ($(".input_barrage").val() == '') {
				$(".input_barrage").focus();
			}else{
				var txtTpl = '<div class="item mine"><span class="text">'+$(".input_barrage").val()+'</span></div>';
				$(".input_barrage").val('');
				$(txtTpl).insertAfter($("#barrage_list").find(".item").eq(3));
			}
		};
	});
	$(".input_barrage").blur(function(){
		if ($(".input_barrage").val() == ''){
			$('form').removeClass('func_active')
		}
	})
	//分享
	$(".btn_share").on("tap", function(){
		$(".mod_share_tips").show();
	});
	$(".mod_share_tips").on("tap", function(){
		$(this).hide();
	});

	// 滚动弹幕
	setInterval(function(){
		setTimeout(function(){
			var h = $('.barrage_list .item').eq(0).height() + parseFloat($('.barrage_list .item').eq(0).css('margin-bottom')) ;
			$('.barrage_list .item').eq(0).addClass('out').css({
				'margin-top': '-'+ h + 'px'
			});
			$('.barrage_list .item').eq(1).addClass('fadeout');
		},1000)
		setTimeout(function(){
			$('.barrage_list .item').eq(0).remove();
			$('.barrage_list').append('<div class="item"><span class="text"><span class="name">大粉丝：</span>呼儿将出换美酒</span></div>');
		},2000)
	},3000)

});


var video = new tvp.VideoInfo();
	video.setVid("m0018jcg5do");
var player = new tvp.Player();

player.create({
	width: '100%',
	height: '100%',
	video: video,
	modId: "mod_player",
	pic: "http://i.gtimg.cn/qqlive/images/20160307/i1457331834_1.jpg",
	autoplay: false
});

$(".live_head .living").on("tap", function(){
	player.play();
});



$('body').delegate('#select','change',function(){
	var val = $(this).val();
	if( val == '1' ){
		$('.container_invite').addClass('none');
		$('.container_live').removeClass('none');
		$('.tvp_app_bar').removeClass('bar_invite');
		$('.tvp_overlay_play').removeClass('none');
		$('.mod_live_end').addClass('none');
	}
	if( val == '2' ){
		$('.container_live').addClass('none');
		$('.container_invite').removeClass('none');
		$('.video_quan').addClass('none');
		$('.tvp_app_bar').addClass('bar_invite')
	}
	if( val == '3' ){
		$('.container_invite').addClass('none');
		$('.container_live').removeClass('none');
		$('.tvp_overlay_play').addClass('none');
		$('.mod_live_end').removeClass('none');
		// $('.container_live').addClass('none');
		// $('.container_invite').removeClass('none');
		// $('.video_quan').addClass('none');
		// $('.tvp_app_bar').addClass('bar_invite')
	}
})

// 弹幕区域刚好充满屏幕
$wh = $(window).height();

// alert($('html').height())

$('.mod_barrage').css({
	'height': $('html').height() - $('.mod_player').height() - $('.live_head').height()
})


// 播放器尺寸
// $('#mod_player').css({
// 	'width': '100%',
// 	'height': Math.ceil( $('#mod_player').width()*9/16 )
// })


//  已预定
$('.btn_subscript').click(function(){
	$(this).toggleClass('current');
	if( $(this).hasClass('current')){
		$(this).html('<i class="icon_subscript"></i>预定成功')
	}else{
		$(this).html('<i class="icon_subscript"></i>预定直播')

	}
})
</script>
</body>
</html>